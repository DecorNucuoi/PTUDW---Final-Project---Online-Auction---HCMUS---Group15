{{#section 'js'}}
<script>
    $('#frmChangePass').on('submit', function (e) {
        e.preventDefault();
        
        const newPass = $('#new_password').val();
        const confirmPass = $('#confirm_password').val();

        if (newPass.length < 6) {
             alert('Password must be at least 6 characters.');
             return;
        }

        if (newPass !== confirmPass) {
            alert('New passwords do not match!');
            return;
        }

        this.submit();
    });
</script>
{{/section}}

<div class="card">
  <h5 class="card-header">
    <i class="bi bi-key"></i>
    Change Password
  </h5>
  <div class="card-body">
    
    {{#if err_message}}
      <div class="alert alert-danger alert-dismissible fade show">
        {{err_message}}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>
    {{/if}}

    {{#if success_message}}
      <div class="alert alert-success alert-dismissible fade show">
        {{success_message}}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>
    {{/if}}

    <form method="post" id="frmChangePass">
      
      <!-- Current Password -->
      <div class="row mb-3">
        <label for="current_password" class="col-sm-3 col-form-label">Current Password</label>
        <div class="col-sm-9">
          <input type="password" class="form-control" id="current_password" name="current_password" required autofocus>
        </div>
      </div>

      <!-- New Password -->
      <div class="row mb-3">
        <label for="new_password" class="col-sm-3 col-form-label">New Password</label>
        <div class="col-sm-9">
          <input type="password" class="form-control" id="new_password" name="new_password" required>
        </div>
      </div>

      <!-- Confirm Password -->
      <div class="row mb-3">
        <label for="confirm_password" class="col-sm-3 col-form-label">Confirm New Password</label>
        <div class="col-sm-9">
          <input type="password" class="form-control" id="confirm_password" name="confirm_password" required>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-9 offset-sm-3">
          <button type="submit" class="btn btn-success">
            <i class="bi bi-check2"></i> Save Changes
          </button>
          <a href="/account/profile" class="btn btn-outline-secondary">
             Cancel
          </a>
        </div>
      </div>
    </form>
  </div>
</div>