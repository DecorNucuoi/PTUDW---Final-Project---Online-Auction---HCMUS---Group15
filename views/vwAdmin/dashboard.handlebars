<!-- Admin Dashboard -->
<div class="container-fluid mt-4">
    <!-- Welcome Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card bg-gradient-primary text-white shadow">
                <div class="card-body">
                    <h2 class="mb-0">
                        <i class="bi bi-speedometer2"></i> Admin Dashboard
                    </h2>
                    <p class="mb-0 mt-2">Chào mừng <strong>{{adminUser.full_name}}</strong>! Quản lý hệ thống đấu giá trực tuyến.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Navigation -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card shadow-sm">
                <div class="card-header bg-white">
                    <h5 class="mb-0"><i class="bi bi-grid-3x3-gap-fill"></i> Truy Cập Nhanh</h5>
                </div>
                <div class="card-body">
                    <div class="row g-3">
                        <!-- Users Management -->
                        <div class="col-md-3">
                            <a href="/admin/users" class="text-decoration-none">
                                <div class="card border-primary h-100 hover-shadow">
                                    <div class="card-body text-center">
                                        <i class="bi bi-people-fill text-primary" style="font-size: 3rem;"></i>
                                        <h5 class="mt-3 text-primary">Quản Lý Users</h5>
                                        <p class="text-muted mb-0">CRUD người dùng</p>
                                    </div>
                                </div>
                            </a>
                        </div>

                        <!-- Categories Management -->
                        <div class="col-md-3">
                            <a href="/admin/categories" class="text-decoration-none">
                                <div class="card border-success h-100 hover-shadow">
                                    <div class="card-body text-center">
                                        <i class="bi bi-folder-fill text-success" style="font-size: 3rem;"></i>
                                        <h5 class="mt-3 text-success">Quản Lý Danh Mục</h5>
                                        <p class="text-muted mb-0">CRUD categories</p>
                                    </div>
                                </div>
                            </a>
                        </div>

                        <!-- Products Management -->
                        <div class="col-md-3">
                            <a href="/admin/products" class="text-decoration-none">
                                <div class="card border-warning h-100 hover-shadow">
                                    <div class="card-body text-center">
                                        <i class="bi bi-box-seam text-warning" style="font-size: 3rem;"></i>
                                        <h5 class="mt-3 text-warning">Quản Lý Sản Phẩm</h5>
                                        <p class="text-muted mb-0">Soft delete products</p>
                                    </div>
                                </div>
                            </a>
                        </div>

                        <!-- System Config -->
                        <div class="col-md-3">
                            <a href="/admin/config" class="text-decoration-none">
                                <div class="card border-info h-100 hover-shadow">
                                    <div class="card-body text-center">
                                        <i class="bi bi-gear-fill text-info" style="font-size: 3rem;"></i>
                                        <h5 class="mt-3 text-info">Cấu Hình Hệ Thống</h5>
                                        <p class="text-muted mb-0">Dynamic config</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Statistics Cards -->
    <div class="row mb-4">
        <!-- Users Stats -->
        <div class="col-xl-3 col-md-6 mb-3">
            <div class="card border-left-primary shadow h-100">
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                Tổng Người Dùng
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{stats.users.total}}</div>
                            <div class="mt-2">
                                <small class="text-muted">
                                    <i class="bi bi-person"></i> Bidders: {{stats.users.bidders}} |
                                    <i class="bi bi-shop"></i> Sellers: {{stats.users.sellers}} |
                                    <i class="bi bi-shield-fill"></i> Admins: {{stats.users.admins}}
                                </small>
                            </div>
                        </div>
                        <div class="col-auto">
                            <i class="bi bi-people-fill text-primary" style="font-size: 2rem;"></i>
                        </div>
                    </div>
                </div>
                <div class="card-footer bg-light">
                    <a href="/admin/users" class="small text-primary">Xem chi tiết <i class="bi bi-arrow-right"></i></a>
                </div>
            </div>
        </div>

        <!-- Products Stats -->
        <div class="col-xl-3 col-md-6 mb-3">
            <div class="card border-left-success shadow h-100">
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col">
                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                Tổng Sản Phẩm
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{stats.products.total}}</div>
                            <div class="mt-2">
                                <small class="text-muted">
                                    <span class="badge bg-success">Đang đấu: {{stats.products.active}}</span>
                                    <span class="badge bg-secondary">Kết thúc: {{stats.products.ended}}</span>
                                </small>
                            </div>
                        </div>
                        <div class="col-auto">
                            <i class="bi bi-box-seam text-success" style="font-size: 2rem;"></i>
                        </div>
                    </div>
                </div>
                <div class="card-footer bg-light">
                    <a href="/admin/products" class="small text-success">Xem chi tiết <i class="bi bi-arrow-right"></i></a>
                </div>
            </div>
        </div>

        <!-- Categories Stats -->
        <div class="col-xl-3 col-md-6 mb-3">
            <div class="card border-left-warning shadow h-100">
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col">
                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                                Tổng Danh Mục
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{stats.categories.total}}</div>
                            <div class="mt-2">
                                <small class="text-muted">
                                    <i class="bi bi-folder"></i> Root: {{stats.categories.root}} |
                                    <i class="bi bi-folder2"></i> Sub: {{subtract stats.categories.total stats.categories.root}}
                                </small>
                            </div>
                        </div>
                        <div class="col-auto">
                            <i class="bi bi-folder-fill text-warning" style="font-size: 2rem;"></i>
                        </div>
                    </div>
                </div>
                <div class="card-footer bg-light">
                    <a href="/admin/categories" class="small text-warning">Xem chi tiết <i class="bi bi-arrow-right"></i></a>
                </div>
            </div>
        </div>

        <!-- Upgrade Requests Stats -->
        <div class="col-xl-3 col-md-6 mb-3">
            <div class="card border-left-danger shadow h-100">
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col">
                            <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">
                                Yêu Cầu Nâng Cấp
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{stats.upgradeRequests}}</div>
                            <div class="mt-2">
                                <small class="text-muted">
                                    <i class="bi bi-clock-history"></i> Chờ duyệt
                                </small>
                            </div>
                        </div>
                        <div class="col-auto">
                            <i class="bi bi-person-up text-danger" style="font-size: 2rem;"></i>
                        </div>
                    </div>
                </div>
                <div class="card-footer bg-light">
                    <a href="/admin/users/upgrade-requests" class="small text-danger">Xem chi tiết <i class="bi bi-arrow-right"></i></a>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Activities -->
    <div class="row">
        <div class="col-12">
            <div class="card shadow-sm">
                <div class="card-header bg-white">
                    <h5 class="mb-0"><i class="bi bi-activity"></i> Hoạt Động Gần Đây (10 Bids Mới Nhất)</h5>
                </div>
                <div class="card-body">
                    {{#if stats.recentBids}}
                    <div class="table-responsive">
                        <table class="table table-hover table-sm">
                            <thead class="table-light">
                                <tr>
                                    <th>Thời Gian</th>
                                    <th>Người Đấu</th>
                                    <th>Sản Phẩm</th>
                                    <th>Giá</th>
                                </tr>
                            </thead>
                            <tbody>
                                {{#each stats.recentBids}}
                                <tr>
                                    <td>{{this.created_at}}</td>
                                    <td><i class="bi bi-person-circle"></i> {{this.bidder_name}}</td>
                                    <td>
                                        <a href="/products/detail/{{this.product_id}}" target="_blank">
                                            {{this.product_name}}
                                        </a>
                                    </td>
                                    <td class="text-success fw-bold">{{this.price}} VND</td>
                                </tr>
                                {{/each}}
                            </tbody>
                        </table>
                    </div>
                    {{else}}
                    <p class="text-muted">Chưa có hoạt động nào.</p>
                    {{/if}}
                </div>
            </div>
        </div>
    </div>

    <!-- System Info -->
    <div class="row mt-4">
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-header bg-info text-white">
                    <h6 class="mb-0"><i class="bi bi-info-circle"></i> Thông Tin Hệ Thống</h6>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled mb-0">
                        <li><strong>Tổng Bids:</strong> {{stats.bids}} lượt</li>
                        <li><strong>Sản phẩm đã gỡ:</strong> {{stats.products.deleted}}</li>
                        <li><strong>Sản phẩm nháp:</strong> {{stats.products.draft}}</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-header bg-secondary text-white">
                    <h6 class="mb-0"><i class="bi bi-link-45deg"></i> Liên Kết Nhanh</h6>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled mb-0">
                        <li><a href="/admin/config"><i class="bi bi-gear"></i> Cấu hình hệ thống</a></li>
                        <li><a href="/admin/users/upgrade-requests"><i class="bi bi-person-up"></i> Duyệt nâng cấp</a></li>
                        <li><a href="/"><i class="bi bi-house"></i> Về trang chủ</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.hover-shadow {
    transition: all 0.3s ease;
}

.hover-shadow:hover {
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;
    transform: translateY(-5px);
}

.border-left-primary {
    border-left: 0.25rem solid #4e73df !important;
}

.border-left-success {
    border-left: 0.25rem solid #1cc88a !important;
}

.border-left-warning {
    border-left: 0.25rem solid #f6c23e !important;
}

.border-left-danger {
    border-left: 0.25rem solid #e74a3b !important;
}

.bg-gradient-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}
</style>
